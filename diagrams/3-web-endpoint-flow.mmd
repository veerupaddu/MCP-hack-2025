sequenceDiagram
    participant User
    participant Browser
    participant Modal as Modal Platform
    participant WebEndpoint as RAGModel.web_query
    participant QueryMethod as RAGModel.query
    participant RAGChain
    participant ChromaDB
    participant LLM

    User->>Browser: GET https://.../web_query?question=...
    Browser->>Modal: HTTP GET request
    Modal->>WebEndpoint: Route to @modal.fastapi_endpoint
    
    WebEndpoint->>QueryMethod: Call query.local(question)
    
    Note over QueryMethod,LLM: Same flow as Query diagram
    QueryMethod->>RAGChain: Build chain
    RAGChain->>ChromaDB: Retrieve docs
    RAGChain->>LLM: Generate answer
    LLM-->>QueryMethod: Return result
    
    QueryMethod-->>WebEndpoint: Return {answer, sources}
    WebEndpoint-->>Modal: JSON response
    Modal-->>Browser: HTTP 200 + JSON
    Browser-->>User: Display result
