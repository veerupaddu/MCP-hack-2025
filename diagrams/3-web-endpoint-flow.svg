<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 600">
  <defs>
    <style>
      .title { font: bold 22px sans-serif; fill: #1a1a1a; }
      .subtitle { font: 15px sans-serif; fill: #666; }
      .box { fill: #f0f7ff; stroke: #2563eb; stroke-width: 2; }
      .box-header { fill: #2563eb; }
      .box-text { font: 13px sans-serif; fill: #1a1a1a; }
      .box-header-text { font: bold 13px sans-serif; fill: white; }
      .arrow { stroke: #2563eb; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .metric { font: 12px monospace; fill: #059669; font-weight: bold; }
      .endpoint { fill: #fef3c7; stroke: #d97706; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#2563eb" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="500" y="40" class="title" text-anchor="middle">Web Endpoint Flow - FastAPI Integration</text>
  <text x="500" y="65" class="subtitle" text-anchor="middle">HTTP API for RAG and Fine-tuned Model Inference</text>
  
  <!-- Client Request -->
  <rect x="50" y="120" width="180" height="100" class="box" rx="8"/>
  <rect x="50" y="120" width="180" height="35" class="box-header" rx="8"/>
  <text x="140" y="142" class="box-header-text" text-anchor="middle">CLIENT REQUEST</text>
  <text x="140" y="175" class="box-text" text-anchor="middle">üåê HTTP POST</text>
  <text x="140" y="195" class="box-text" text-anchor="middle">JSON payload</text>
  
  <path d="M 230 170 L 280 170" class="arrow"/>
  
  <!-- FastAPI Endpoint -->
  <rect x="280" y="120" width="200" height="100" class="endpoint" rx="8"/>
  <rect x="280" y="120" width="200" height="35" class="box-header" rx="8"/>
  <text x="380" y="142" class="box-header-text" text-anchor="middle">FASTAPI ENDPOINT</text>
  <text x="380" y="175" class="box-text" text-anchor="middle">@modal.fastapi_endpoint</text>
  <text x="380" y="195" class="box-text" text-anchor="middle">Async handler</text>
  
  <path d="M 480 170 L 530 170" class="arrow"/>
  
  <!-- Modal Container -->
  <rect x="530" y="100" width="420" height="380" fill="#f8fafc" stroke="#475569" stroke-width="3" rx="10"/>
  <text x="740" y="130" class="title" text-anchor="middle" font-size="16">Modal Container (GPU)</text>
  
  <!-- RAG Endpoint -->
  <rect x="560" y="160" width="170" height="110" fill="#d1fae5" stroke="#059669" stroke-width="2" rx="8"/>
  <rect x="560" y="160" width="170" height="35" class="box-header" rx="8"/>
  <text x="645" y="182" class="box-header-text" text-anchor="middle">RAG ENDPOINT</text>
  <text x="645" y="210" class="box-text" text-anchor="middle">rag-vllm-optimized</text>
  <text x="645" y="230" class="box-text" text-anchor="middle">ChromaDB + vLLM</text>
  <text x="645" y="255" class="metric" text-anchor="middle">&lt;3s latency</text>
  
  <!-- Fine-tuned Endpoint -->
  <rect x="750" y="160" width="170" height="110" fill="#d1fae5" stroke="#059669" stroke-width="2" rx="8"/>
  <rect x="750" y="160" width="170" height="35" class="box-header" rx="8"/>
  <text x="835" y="182" class="box-header-text" text-anchor="middle">FINE-TUNED API</text>
  <text x="835" y="210" class="box-text" text-anchor="middle">phi3-inference-vllm</text>
  <text x="835" y="230" class="box-text" text-anchor="middle">Merged model</text>
  <text x="835" y="255" class="metric" text-anchor="middle">&lt;3s latency</text>
  
  <!-- Processing Layer -->
  <rect x="560" y="300" width="360" height="90" class="box" rx="8"/>
  <rect x="560" y="300" width="360" height="35" class="box-header" rx="8"/>
  <text x="740" y="322" class="box-header-text" text-anchor="middle">PROCESSING LAYER</text>
  <text x="740" y="355" class="box-text" text-anchor="middle">‚Ä¢ Request validation ‚Ä¢ Model inference</text>
  <text x="740" y="375" class="box-text" text-anchor="middle">‚Ä¢ Response formatting ‚Ä¢ Error handling</text>
  
  <!-- GPU Resources -->
  <rect x="560" y="410" width="360" height="50" fill="#fef3c7" stroke="#d97706" stroke-width="1" rx="6"/>
  <text x="740" y="435" class="box-text" text-anchor="middle" font-weight="bold">GPU Resources: A10G</text>
  <text x="740" y="452" class="metric" text-anchor="middle">Shared: Embeddings + vLLM Engine</text>
  
  <!-- Response -->
  <rect x="50" y="300" width="180" height="120" class="box" rx="8"/>
  <rect x="50" y="300" width="180" height="35" class="box-header" rx="8"/>
  <text x="140" y="322" class="box-header-text" text-anchor="middle">RESPONSE</text>
  <text x="140" y="355" class="box-text" text-anchor="middle">‚úÖ Answer</text>
  <text x="140" y="375" class="box-text" text-anchor="middle">üìä Metrics</text>
  <text x="140" y="395" class="box-text" text-anchor="middle">üìÑ Sources (RAG)</text>
  <text x="140" y="415" class="metric" text-anchor="middle">JSON format</text>
  
  <path d="M 530 360 L 230 360" class="arrow"/>
  
  <!-- Endpoints Info -->
  <rect x="50" y="500" width="900" height="80" fill="#f0f7ff" stroke="#2563eb" stroke-width="2" rx="8"/>
  <text x="500" y="530" class="box-text" text-anchor="middle" font-weight="bold" font-size="16">Available Endpoints</text>
  <text x="250" y="555" class="box-text" text-anchor="middle" font-weight="bold">RAG:</text>
  <text x="250" y="572" class="metric" text-anchor="middle" font-size="10">rag-vllm-optimized-ragmodel-query</text>
  <text x="750" y="555" class="box-text" text-anchor="middle" font-weight="bold">Fine-tuned:</text>
  <text x="750" y="572" class="metric" text-anchor="middle" font-size="10">phi3-inference-vllm-model-ask</text>
  
  <!-- Footer -->
  <text x="500" y="595" class="subtitle" text-anchor="middle" font-size="11">Infrastructure: Modal ‚Ä¢ Framework: FastAPI ‚Ä¢ Updated: 2025-11-30</text>
</svg>