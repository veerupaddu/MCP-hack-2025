<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 700">
  <defs>
    <style>
      .title { font: bold 22px sans-serif; fill: #1a1a1a; }
      .subtitle { font: 15px sans-serif; fill: #666; }
      .box { fill: #f0f7ff; stroke: #2563eb; stroke-width: 2; }
      .box-header { fill: #2563eb; }
      .box-text { font: 13px sans-serif; fill: #1a1a1a; }
      .box-header-text { font: bold 13px sans-serif; fill: white; }
      .arrow { stroke: #2563eb; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .metric { font: 12px monospace; fill: #059669; font-weight: bold; }
      .state { fill: #fef3c7; stroke: #d97706; }
      .active { fill: #d1fae5; stroke: #059669; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#2563eb" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="500" y="40" class="title" text-anchor="middle">Modal Container Lifecycle - vLLM Optimized</text>
  <text x="500" y="65" class="subtitle" text-anchor="middle">GPU Container Management for RAG and Fine-tuned Models</text>
  
  <!-- State 1: Cold Start -->
  <rect x="50" y="120" width="200" height="120" class="state" rx="8"/>
  <rect x="50" y="120" width="200" height="35" class="box-header" rx="8"/>
  <text x="150" y="142" class="box-header-text" text-anchor="middle">1. COLD START</text>
  <text x="150" y="175" class="box-text" text-anchor="middle">Container creation</text>
  <text x="150" y="195" class="box-text" text-anchor="middle">Image pull</text>
  <text x="150" y="215" class="metric" text-anchor="middle">~30-60s</text>
  
  <path d="M 250 180 L 300 180" class="arrow"/>
  
  <!-- State 2: Loading Resources -->
  <rect x="300" y="120" width="200" height="120" class="state" rx="8"/>
  <rect x="300" y="120" width="200" height="35" class="box-header" rx="8"/>
  <text x="400" y="142" class="box-header-text" text-anchor="middle">2. LOAD RESOURCES</text>
  <text x="400" y="175" class="box-text" text-anchor="middle">ðŸ“š Embeddings</text>
  <text x="400" y="195" class="box-text" text-anchor="middle">ðŸ’¾ ChromaDB</text>
  <text x="400" y="215" class="box-text" text-anchor="middle">ðŸ¤– vLLM Engine</text>
  <text x="400" y="232" class="metric" text-anchor="middle">~20-40s</text>
  
  <path d="M 500 180 L 550 180" class="arrow"/>
  
  <!-- State 3: Ready -->
  <rect x="550" y="120" width="200" height="120" class="active" rx="8"/>
  <rect x="550" y="120" width="200" height="35" class="box-header" rx="8"/>
  <text x="650" y="142" class="box-header-text" text-anchor="middle">3. READY âœ…</text>
  <text x="650" y="175" class="box-text" text-anchor="middle">Accepting requests</text>
  <text x="650" y="195" class="box-text" text-anchor="middle">GPU warmed up</text>
  <text x="650" y="215" class="metric" text-anchor="middle">&lt;3s latency</text>
  
  <path d="M 650 240 L 650 290" class="arrow"/>
  
  <!-- State 4: Active Processing -->
  <rect x="550" y="290" width="200" height="120" class="active" rx="8"/>
  <rect x="550" y="290" width="200" height="35" class="box-header" rx="8"/>
  <text x="650" y="312" class="box-header-text" text-anchor="middle">4. PROCESSING</text>
  <text x="650" y="345" class="box-text" text-anchor="middle">Handling queries</text>
  <text x="650" y="365" class="box-text" text-anchor="middle">GPU inference</text>
  <text x="650" y="385" class="box-text" text-anchor="middle">Concurrent requests</text>
  <text x="650" y="402" class="metric" text-anchor="middle">Async execution</text>
  
  <!-- Idle Timer -->
  <rect x="300" y="290" width="200" height="120" class="state" rx="8"/>
  <rect x="300" y="290" width="200" height="35" class="box-header" rx="8"/>
  <text x="400" y="312" class="box-header-text" text-anchor="middle">5. IDLE TIMER</text>
  <text x="400" y="345" class="box-text" text-anchor="middle">No requests</text>
  <text x="400" y="365" class="box-text" text-anchor="middle">Scaledown window:</text>
  <text x="400" y="385" class="metric" text-anchor="middle">300 seconds</text>
  <text x="400" y="402" class="box-text" text-anchor="middle" font-size="11">(5 minutes)</text>
  
  <path d="M 550 350 L 500 350" class="arrow"/>
  
  <!-- State 6: Shutdown -->
  <rect x="50" y="290" width="200" height="120" class="box" rx="8"/>
  <rect x="50" y="290" width="200" height="35" class="box-header" rx="8"/>
  <text x="150" y="312" class="box-header-text" text-anchor="middle">6. SHUTDOWN</text>
  <text x="150" y="345" class="box-text" text-anchor="middle">Container stopped</text>
  <text x="150" y="365" class="box-text" text-anchor="middle">Resources freed</text>
  <text x="150" y="385" class="box-text" text-anchor="middle">Cost savings</text>
  
  <path d="M 300 350 L 250 350" class="arrow"/>
  
  <!-- Restart arrow -->
  <path d="M 150 290 Q 150 260 250 180" class="arrow" stroke-dasharray="5,5"/>
  <text x="180" y="260" class="box-text" font-size="11">New request</text>
  
  <!-- Configuration -->
  <rect x="50" y="460" width="700" height="120" fill="#f0fdf4" stroke="#059669" stroke-width="2" rx="8"/>
  <text x="400" y="490" class="box-text" text-anchor="middle" font-weight="bold" font-size="16">Container Configuration</text>
  
  <text x="70" y="520" class="box-text" font-weight="bold">GPU:</text>
  <text x="120" y="520" class="box-text">A10G (24GB VRAM)</text>
  
  <text x="70" y="545" class="box-text" font-weight="bold">Scaledown:</text>
  <text x="170" y="545" class="box-text">300s idle timeout</text>
  
  <text x="400" y="520" class="box-text" font-weight="bold">Memory:</text>
  <text x="470" y="520" class="box-text">70% GPU utilization</text>
  
  <text x="400" y="545" class="box-text" font-weight="bold">Concurrency:</text>
  <text x="500" y="545" class="box-text">Async (multiple requests)</text>
  
  <text x="70" y="570" class="box-text" font-weight="bold">Warm Start:</text>
  <text x="170" y="570" class="metric">&lt;100ms (if cached)</text>
  
  <text x="400" y="570" class="box-text" font-weight="bold">Cold Start:</text>
  <text x="490" y="570" class="metric">~50-100s total</text>
  
  <!-- Benefits -->
  <rect x="50" y="610" width="700" height="70" fill="#fef3c7" stroke="#d97706" stroke-width="2" rx="8"/>
  <text x="400" y="640" class="box-text" text-anchor="middle" font-weight="bold" font-size="15">Benefits of Modal Container Management</text>
  <text x="400" y="665" class="box-text" text-anchor="middle">âœ… Auto-scaling â€¢ ðŸ’° Cost optimization â€¢ âš¡ Fast warm starts â€¢ ðŸ”„ Automatic restarts â€¢ ðŸ“Š Built-in monitoring</text>
  
  <!-- Footer -->
  <text x="500" y="695" class="subtitle" text-anchor="middle" font-size="11">Infrastructure: Modal â€¢ GPU: A10G â€¢ Updated: 2025-11-30</text>
</svg>